
# Miromi Wedding Face Swap (2 Faces)

초보자도 쓸 수 있는 **웨딩 화보 얼굴 스왑** 스트림릿 앱입니다. 두 명의 사용자 얼굴을 준비된 웨딩 사진의 두 얼굴에 정확히 매핑하고, InsightFace의 `inswapper_128.onnx`로 고품질 스왑을 수행합니다.

## 특징
- **두 얼굴 자동/수동 매핑**: 임베딩 유사도 기반 자동 매칭 + 인덱스 수동 지정
- **신원 일관성(ID Consistency)**: InsightFace 임베딩으로 매칭 → 같은 사람, 같은 각도일수록 안정적
- **색/톤 유지 옵션**, 약한 샤픈 후처리
- **GPU / CPU 선택** (이벤트용 PC에서는 GPU 권장)

## 설치 (Windows, Python 3.11 권장)
```bash
python -m venv .venv
.venv\Scripts\activate
pip install -r requirements.txt
```
> `insightface`가 처음 실행될 때 필요한 모델을 자동으로 다운로드합니다. (인터넷 필요)

## 실행
```bash
streamlit run app.py
```
브라우저가 열리면,
1) 소스 얼굴 A/B 업로드 (사용자 사진)
2) 타겟 웨딩 사진 업로드 (두 얼굴이 보이는 사진)
3) 자동 매핑 확인 → 필요 시 수동 인덱스 지정
4) [얼굴 스왑 실행] 클릭 → 결과 확인/다운로드

## 캡처 팁 (오류/파손 방지)
- 정면에 가깝고 얼굴이 충분히 크게 나온 사진
- 베일/머리카락/손 등 얼굴 가림 최소화
- 과한 미소보다 자연스러운 표정이 매칭 안정적

## 자주 묻는 질문
- **두 얼굴이 바뀌어 들어가요.** → 수동 매핑에서 A/B를 원하는 타겟 인덱스로 지정하세요.
- **타겟에서 한 명만 잡혀요.** → 해상도를 800 또는 960으로 올리거나, 더 큰 원본을 사용하세요.
- **색감이 동떨어져 보여요.** → 결과를 Lightroom/Resolve LUT로 보정하거나, 앱의 톤 유지 옵션을 켜세요.

## 주의
- 초상권/동의: 당사자 동의 하에 사용하세요.
- 상업 이벤트(포토부스)에서는 **오프라인/로컬 실행**을 권장합니다.
